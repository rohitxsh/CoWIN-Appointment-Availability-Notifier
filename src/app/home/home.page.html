<ion-header>
  <ion-toolbar>
    <ion-title>
      <b>CoWIN <br /> Appointment Availability Notifier</b>
    </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">

  <div id="container" *ngIf="!isAlertActive">
    <ion-list>
      <ion-list-header>
        <ion-label>
          <b>Customise a new appointment availability alert</b>
        </ion-label>
      </ion-list-header>
      <ion-item>
        <ion-label>State</ion-label>
        <ion-select interface="action-sheet" (ionChange)="fetchDistricts($event)">
          <ion-select-option *ngFor="let state of states" [value]="state"> {{state.state_name}} </ion-select-option>
        </ion-select>
      </ion-item>

      <div *ngIf="isStateSelected">
        <ion-list>
          <ion-item>
            <ion-label>Districts</ion-label>
            <ion-select interface="action-sheet" (ionChange)="setDistrict($event)" aria-required="required">
              <ion-select-option *ngFor="let district of districts" [value]="district"> {{district.district_name}} </ion-select-option>
            </ion-select>
          </ion-item>
        </ion-list>
        <ion-item>
          <ion-label>Date</ion-label>
          <ion-datetime displayFormat="DD-MM-YYYY" (ionChange)="setDate($event)"></ion-datetime>
        </ion-item>
        <ion-item>
          <ion-label class="fee_type"> Fee type </ion-label>
          <ion-segment scrollable (ionChange)="segmentChanged($event)" value="any">
            <ion-segment-button value="any">
              <ion-label>Any</ion-label>
            </ion-segment-button>
            <ion-segment-button value="Free">
              <ion-label>Free</ion-label>
            </ion-segment-button>
            <ion-segment-button value="Paid">
              <ion-label>Paid</ion-label>
            </ion-segment-button>
          </ion-segment>
        </ion-item>
        <ion-item>
          <ion-label>Test mode <ion-chip color="primary" (click)="testInfo()" outline><ion-icon name="alert-circle-outline" ></ion-icon></ion-chip></ion-label>
          <ion-toggle checked (ionChange)="testToggle($event)"></ion-toggle>
        </ion-item>
        <ion-item>
          <ion-label position="fixed">Sync every</ion-label>
          <ion-input type="number" value="15" (ionChange)="updateIntervalInfo($event)" required="true"></ion-input> minutes
        </ion-item>
      </div>

      <div class="createAlert" *ngIf="isDistrictSelected && isDateSelected">
        <ion-button expand="block" (click)="saveAlertCheck()">
          CREATE ALERT
        </ion-button>
      </div>
    </ion-list>
  </div>

  <div class="activeCard" *ngIf="isAlertActive">
    <ion-card>
      <ion-item class="ion-activated">
        <ion-icon name="alert-circle-outline" slot="start"></ion-icon>
        <ion-label>Active alert's details</ion-label>
        <ion-chip color="danger">
          <ion-label color="danger" (click)="deleteAlert()"> Delete </ion-label>
        </ion-chip>
      </ion-item>

      <ion-item class="ion-activated">
        <ion-label>State</ion-label>
        <ion-chip color="primary">
          <ion-label color="primary"> {{ data['state_name'] }} </ion-label>
        </ion-chip>
      </ion-item>

      <ion-item class="ion-activated">
        <ion-label>District</ion-label>
        <ion-chip color="primary">
          <ion-label color="primary"> {{ data['district_name'] }} </ion-label>
        </ion-chip>
      </ion-item>

      <ion-item class="ion-activated">
        <ion-label>Start date</ion-label>
        <ion-chip color="primary">
          <ion-label color="primary"> {{ data['startDate'] }} </ion-label>
        </ion-chip>
      </ion-item>

      <ion-item class="ion-activated">
        <ion-label>End date</ion-label>
        <ion-chip color="primary">
          <ion-label color="primary"> {{ data['endDate'] }} </ion-label>
        </ion-chip>
      </ion-item>

      <ion-item class="ion-activated">
        <ion-label>Minimum age limit</ion-label>
        <ion-chip color="primary">
          <ion-label color="primary"> {{ minimumAgeLimit }} </ion-label>
        </ion-chip>
      </ion-item>

      <ion-item class="ion-activated">
        <ion-label>Fee type</ion-label>
        <ion-chip color="primary">
          <ion-label color="primary"> {{ fee_type }} </ion-label>
        </ion-chip>
      </ion-item>

      <ion-item class="ion-activated">
        <ion-label>Update interval</ion-label>
        <ion-chip color="primary">
          <ion-label color="primary"> {{ updateInterval }} min(s). </ion-label>
        </ion-chip>
      </ion-item>

      <ion-item class="ion-activated">
        <ion-label>Test mode</ion-label>
        <ion-chip color="primary">
          <ion-label color="primary"> {{ testMode.toString() }} </ion-label>
        </ion-chip>
      </ion-item>
    </ion-card>

    <ion-card class="updateTime">
      <ion-item class="ion-activated">
        <ion-icon name="alert-circle-outline" slot="start"></ion-icon>
        <ion-label>Last synced</ion-label>
      </ion-item>

      <ion-item class="ion-activated">
        <ion-chip color="primary">
          <ion-label color="primary"> {{ lastUpdateDate }} </ion-label>
        </ion-chip>
      </ion-item>
    </ion-card>

    <div class="cowinUrl">
      <ion-button expand="block" href="https://selfregistration.cowin.gov.in/">
        CoWIN
      </ion-button>
    </div>
  </div>
</ion-content>
